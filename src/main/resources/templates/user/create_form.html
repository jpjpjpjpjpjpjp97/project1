<!DOCTYPE html>
<html
        lang="en"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{generic/main}"
>
<head>
    <meta charset="UTF-8">
    <title th:text="${user ? 'Update' + user.name : 'Create User'}"></title>
</head>
<body>
    <div th:fragment="user_form">
        <form method="post" th:action='@{/user}' th:object="${user}">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            <div>
                <label for="username">Username: </label>
                <input id="username" name="username" type="text" th:field="*{username}"/>
                <ul>
                    <li th:each="err : ${#fields.errors('username')}" th:text="${err}" class="error"></li>
                </ul>
            </div>
            <div>
                <label for="passwordHash">Password: </label>
                <input id="passwordHash" name="passwordHash" type="password" th:field="*{passwordHash}"/>
                <ul>
                    <li th:each="err : ${#fields.errors('passwordHash')}" th:text="${err}" class="error"></li>
                </ul>
            </div>
            <div>
                <label for="password2">Password (again): </label>
                <input id="password2" name="password2" type="password" />
            </div>
            <div>
                <label for="name">Name: </label>
                <input id="name" name="name" type="text" th:field="*{name}"/>
                <ul>
                    <li th:each="err : ${#fields.errors('name')}" th:text="${err}" class="error"></li>
                </ul>
            </div>
            <div>
                <label for="phoneNumber">Phone Number: </label>
                <input id="phoneNumber" name="phoneNumber" type="text" th:field="*{phoneNumber}"/>
                <ul>
                    <li th:each="err : ${#fields.errors('phoneNumber')}" th:text="${err}" class="error"></li>
                </ul>
            </div>
            <div>
                <label for="email">Email: </label>
                <input id="email" name="email" type="text" th:field="*{email}"/>
                <ul>
                    <li th:each="err : ${#fields.errors('email')}" th:text="${err}" class="error"></li>
                </ul>
            </div>
            <div>
                <label for="role">Role: </label>
                <select id="role" name="role" >
                    <option th:each="role : ${roles}" th:value="${role.name}" th:text="${role.name}"></option>
                </select>
            </div>
            <div>
                <input type="submit" th:value="${user.id != null ? 'Update User' : 'Create User'}">
            </div>
        </form>
    </div>
</body>
</html>